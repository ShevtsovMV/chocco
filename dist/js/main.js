"use strict";!function(){function e(){var e=document.querySelectorAll(".team__photo"),t=document.querySelector(".team__photo"),n=document.querySelector(".team__item");document.documentElement.clientWidth<=768&&t.parentNode===n?e.forEach(function(e){var t=e.closest(".team__item").querySelector(".team__details");t.insertBefore(e,t.firstElementChild)}):768<document.documentElement.clientWidth&&t.parentNode!==n&&e.forEach(function(e){var t=e.closest(".team__item");t.insertBefore(e,t.firstElementChild)})}e(),window.onresize=function(){e()};!function(){var e=document.querySelector(".team"),t=e.querySelectorAll(".team__details"),n=[];t.forEach(function(e){n.push(e.scrollHeight)});var a;e.style.minHeight=parseFloat(getComputedStyle(e).height)+(a=n,Math.max.apply(null,a))+"px"}();var r;(r=document.querySelector(".team")).addEventListener("click",function(e){var t,n,a,o=e.target;o.classList.contains("team__name")&&((t=r.querySelector(".team__item.active"))&&(t.querySelector(".team__details").style.height=0,t.classList.remove("active")),t&&t.querySelector(".team__name")===o||((n=o.closest(".team__item")).classList.add("active"),(a=n.querySelector(".team__details")).style.height=a.scrollHeight+"px"))})}();var horizontalAcco=function(e){function r(){var e=0,t=window.innerWidth-parseFloat(getComputedStyle(l).paddingRight)-n[0].offsetWidth*n.length;return{container:e=530<t?530:t,text:e-parseFloat(getComputedStyle(a[0]).paddingRight)-parseFloat(getComputedStyle(a[0]).paddingLeft)-parseFloat(getComputedStyle(o[0]).marginRight)}}function i(e){e.querySelector("[data-wrap]").style.width="0px",e.classList.remove("active"),c.offsetWidth<=480&&s.forEach(function(e){e.style.width="100%"})}var c=document.querySelector("body"),l=document.querySelector(e),s=l.querySelectorAll("[data-item]"),n=l.querySelectorAll("[data-trigger]"),a=l.querySelectorAll("[data-content]"),o=l.querySelectorAll("[data-text]");l.addEventListener("click",function(e){e.preventDefault();var t,n,a=e.target,o=l.querySelector("[data-item].active");a.closest("[data-trigger]")&&(o&&i(o),o&&o.querySelector("[data-trigger]")===a.closest("[data-trigger]")||((t=a.closest("[data-item]")).classList.add("active"),n=t.querySelector("[data-wrap]"),t.querySelector("[data-text]").style.width=r().text+"px",480<c.offsetWidth?n.style.width=r().container+"px":(s.forEach(function(e){e!==t&&(e.style.width=0)}),n.style.width="100%"))),a.closest("[data-close]")&&i(o)})};horizontalAcco("#accordeonList");var humburgerFn=function(){var e=document.querySelector("#humburger"),t=document.querySelector("#humburgerMenu");e.addEventListener("click",function(e){e.preventDefault(),t.classList.add("open")}),t.querySelector(".menu__close").addEventListener("click",function(){t.classList.remove("open")}),document.querySelector(".menu__list").addEventListener("click",function(e){e.target.closest(".menu__item")&&t.classList.remove("open")})};humburgerFn(),function(){var e;ymaps.ready(function(){e=new ymaps.Map("map",{center:[55.751421,37.606557],zoom:14,controls:[]});var t=new ymaps.GeoObjectCollection({},{draggable:!1,iconLayout:"default#image",iconImageHref:"images/icons/marker.svg",iconImageSize:[46,57],iconImageOffset:[-35,-52]});[[55.758957,37.623319],[55.757844,37.582766],[55.751253,37.607422],[55.743106,37.58349]].forEach(function(e){t.add(new ymaps.Placemark(e))}),e.geoObjects.add(t),e.behaviors.disable("scrollZoom")})}();var validateFields=function(e,t){return t.forEach(function(e){e.removeClass("input-error"),""===e.val().trim()&&e.addClass("input-error")}),0===e.find(".input-error").length};$(".form").submit(function(e){e.preventDefault();var t,n=$(e.currentTarget),a=n.find("[name='name']"),o=n.find("[name='phone']"),r=n.find("[name='comment']"),i=n.find("[name='to']"),c=n.find("[type='reset']"),l=$("#modal"),s=l.find(".modal__content");l.removeClass("error-modal"),validateFields(n,[a,o,r,i])&&((t=$.ajax({url:"https://webdev-api.loftschool.com/sendmail",method:"post",data:{name:a.val(),phone:o.val(),comment:r.val(),to:i.val()}})).done(function(e){s.text(e.message),c.click()}),t.fail(function(e){var t=e.responseJSON.message;s.text(t),l.addClass("error-modal")}),t.always(function(){$.fancybox.open({src:"#modal",type:"inline",opts:{smallBtn:!1}})}))}),$(".app-submit-btn").on("click",function(e){e.preventDefault(),$.fancybox.close()}),function(){var r=$("section"),i=$(".maincontent"),c=$(".fixed-menu"),l=c.find(".fixed-menu__item"),e=new MobileDetect(window.navigator.userAgent).mobile(),s=!1;r.first().addClass("active");function d(e,t,n){e.eq(t).addClass(n).siblings().removeClass(n)}function a(e){var t,n,a,o;s||(s=!0,n=-100*e,t=isNaN(n)?(console.error("передано неверное значение в countSectionPosition"),0):n,a=e,o="fixed-menu_shadowed","black"===r.eq(a).attr("data-sidemenu-theme")?c.addClass(o):c.removeClass(o),i.css({transform:"translateY(".concat(t,"%)")}),d(r,e,"active"),setTimeout(function(){s=!1,d(l,e,"active")},1300))}function o(){var e=r.filter(".active"),t=e.next(),n=e.prev();return{next:function(){t.length&&a(t.index())},prev:function(){n.length&&a(n.index())}}}$(window).on("wheel",function(e){var t=e.originalEvent.deltaY,n=o();0<t&&n.next(),t<0&&n.prev()}),$(window).on("keydown",function(e){var t=e.target.tagName.toLowerCase(),n="input"===t||"textarea"===t,a=o();if(!n)switch(e.keyCode){case 38:a.prev();break;case 40:a.next()}}),$(".wrapper").on("touchmove",function(e){return e.preventDefault}),$("[data-scroll-to]").on("click",function(e){e.preventDefault();var t=$(e.currentTarget).attr("data-scroll-to"),n=$("[data-section-id=".concat(t,"]"));a(n.index())}),e&&$("body").swipe({swipe:function(e,t){o()["down"===t?"prev":"up"===t?"next":""]()}})}(),function(){function e(){o.paused?o.play():o.pause()}var o=document.querySelector(".player__video"),t=($(".player__controls"),$(".player__play"));t.on("click",e),o.addEventListener("click",e),o.onended=function(){t.attr("data-icon","play")},o.onpause=function(){t.attr("data-icon","play")},o.onplay=function(){t.attr("data-icon","pause")},$(".player__playback").on("click",function(e){var t=$(e.currentTarget),n=e.originalEvent.layerX,a=o.duration*n/t.width();o.currentTime=a}),o.ontimeupdate=function(){var e=o.duration,t=o.currentTime/e*100;$(".player__playback-button").css({left:"".concat(t,"%")})},$(".player__volume").on("click",function(e){var t=$(e.currentTarget),n=e.originalEvent.layerX;o.volume=n/t.width()}),o.onvolumechange=function(){var e=100*o.volume;$(".player__volume-button").css({left:"".concat(e,"%")})}}();var slider=function(){var e=document.querySelector("#sliderBtnNext"),t=document.querySelector("#sliderBtnPrev"),n=document.querySelector(".slider__container");e.addEventListener("click",function(){n.appendChild(n.firstElementChild)}),t.addEventListener("click",function(){n.insertBefore(n.lastElementChild,n.firstElementChild)})};slider(),$(".interactive-avatar__link").on("click",function(e){e.preventDefault();var t=$(e.currentTarget).closest(".interactive-avatar"),n=t.index(),a=$(".reviews__item").eq(n);t.addClass("active").siblings().removeClass("active"),a.addClass("active").siblings().removeClass("active")});